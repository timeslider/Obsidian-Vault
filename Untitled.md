var delta = h_slider.value - (past.size() > 0 if past[-1].source.value else 0)


Unexpected "?" in source. If you want a ternary operator, use "truthy_value if true_condition else falsy_value".
